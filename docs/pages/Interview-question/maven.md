# Maven

### maven 是什么？

1. Maven是一个项目管理工具，它包含了一个项目对象模型(pom)，一个项目生命周期(命令)，一个依赖管理系统(坐标)。

### maven仓库分为几种？

1. 本地仓库
2. 远程仓库
   + 中央仓库
   + 私服
   + 其他公共库



### 什么是私服？

1. 私服是一种特殊的远程仓库，它是架设在局域网内的仓库服务，私服代理广域网上的远程仓库，供局域网内的 Maven 用户使用。当 Maven 需要下载构件的时候，它从私服请求，如果私服上不存在该构件，则从外部的远程仓库下载，缓存在私服上之后，再为 Maven 的下载请求提供服务。我们还可以把一些无法从外部仓库下载到的构件上传到私服上。



### Maven的生命周期有哪些？

1. clean 移除所有上一次构建生成的文件
2. validate：验证工程是否正确，所有需要的资源是否可用
3. compile：编译项目的源代码
4. test：使用合适的单元测试框架来测试已编译的源代码。这些测试不需要已打包和布署。
5. package：把已编译的代码打包成可发布的格式，比如 jar、war 等。
6. verify：运行所有检查，验证包是否有效且达到质量标准。
7. install：把包安装到maven本地仓库，可以被其他工程作为依赖来使用
8. site 生成项目的站点文档
9. deploy：在集成或者发布环境下执行，将最终版本的包拷贝到远程的repository，使得其他的开发者或者工程可以共享



### Maven 坐标的含义

1. groupId ：组织ID，定义当前Maven项目隶属组织名称（通常是域名反写，例如：com.qjk）
2. artifactId ：项目ID，定义当前Maven项目名称（通常是模块名称，例如 order-service、goods-service）
3. version ：定义当前项目版本号
4. packaging ：定义 Maven 项目打包的方式，如没有 packaging ，则默认为 jar 包。
5. classifier ：该元素用来帮助定义构建输出的一些附件。附属构件与主构件对应。



### scope依赖范围

1. compile：默认的scope，运行期有效，需要打入包中。
2. provided：编译期有效，运行期不需要提供，不会打入包中。
3. runtime：编译不需要，在运行期有效，需要导入包中。（接口与实现分离）
4. test：测试需要，不会打入包中。
5. system：非本地仓库引入、存在系统的某个路径下的jar。（一般不使用）。



### 如何排除依赖

1. 通过 *exclusions* 标签实现。

2. 通过*optional*实现。

   

### 依赖传递原则

1. 最短路径原则

   ```
   a->b->c(2.0)
   a->c(1.0)
   最后采取 c(1.0) 这个版本，因为它短啊。
   ```

   

2. 最先声明原则

   ```
   a->b->c(2.0)
   a->d->c(1.0)
   因为b先声明引入了c，所以采取c(2.0)
   当然如果我们在 a 中直接依赖了 c 肯定是以我们 a 的项目依赖的 c 版本为主，近亲原则
   ```

   
